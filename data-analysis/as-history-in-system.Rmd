---
title: "R Notebook"
output: html_notebook
---

This notebook analyses the output of an architectural smell tracker and outputs some descriptive statistics.

First, let us setup the data:
```{r}
library(ggplot2)
df <- read.table('smells-characteristics.csv', header = T, sep = ",")
df <- df[!is.na(df$age),]
```

##Number of smells per version
```{r}
p <- ggplot(df, aes(version, group = smellType, fill = smellType)) + geom_bar()
print(p)
```


##What is the distribution of the age among the different types of smells?
Here is the distribution for each type of smell and the mean age shown as a dashed blue vertical line.
```{r}
df.unique <-df[!duplicated(df$uniqueSmellID), c(1,2,3,5)]
p <- ggplot(df.unique, aes(age, group = smellType, colour = smellType)) +
  geom_density()+
  geom_vline(aes(xintercept=mean(age)), color="blue", linetype="dashed", size=1) +
  scale_x_continuous(breaks = seq(1, length(df.unique$age), 1)) +
  scale_y_continuous(breaks = pretty)
print(p)
```

##What is the overlap of smells throughout the system's evolution?
Below we plot the overlap of each smell for every version, some jitter is added make it easier to understand when there are multiple smells that have high overlap.
```{r}
p <- ggplot(df, aes(version, overlapRatio, group = smellType, colour = smellType)) +
  geom_point() +
  geom_jitter(width = 0.05, height = 0.05)
print(p)
```
And here is the distribution of each value per version
```{r}
p <- ggplot(df, aes(overlapRatio, group = version, colour = version)) +
  geom_density()
print(p)
```
And below the overlap per age for each smell type, again with some jitter to better allow us to distinguish each point
```{r}
p <- ggplot(df, aes(age, overlapRatio, group = smellType, colour = smellType)) +
  geom_point() +
  geom_jitter(width = 0.05, height = 0.05) +
  scale_x_continuous(breaks = seq(1, length(df.unique$age), 1)) +
  scale_y_continuous(breaks = pretty)
print(p)
```
